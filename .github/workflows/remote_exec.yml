name: Remote Executor
on:
  workflow_dispatch:
    inputs:
      code:
        description: 'Python code'
        required: true
jobs:
  run-code:
    runs-on: ubuntu-latest
    steps:
      # LFSを有効にしてリポジトリをチェックアウト
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          lfs: true

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # ライブラリのインストール
      - name: Install Python Dependencies
        run: |
          pip install numpy tenseal pandas matplotlib

      # 実行
      - name: Execute Remote Code
        run: |
          set +x
          echo "${{ github.event.inputs.code }}" | base64 -d > remote_script.py
          python3 remote_script.py
